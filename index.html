<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Mimari AR 1:1 Sunum</title>
    
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.5.0/model-viewer.min.js"></script>
    
    <style>
        body { margin: 0; padding: 0; background-color: #f8f9fa; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        model-viewer { width: 100vw; height: 100vh; display: block; }

        /* AR Ba≈ülatma Butonu */
        #ar-button {
            background-color: #007AFF;
            color: white; border: none; border-radius: 50px;
            padding: 18px 36px; font-size: 18px; font-weight: bold;
            position: absolute; bottom: 60px; left: 50%;
            transform: translateX(-50%); cursor: pointer;
            box-shadow: 0 10px 25px rgba(0,122,255,0.4);
            z-index: 999;
            display: block;
        }

        /* Y√ºkleme Ekranƒ± */
        #progress-bar { width: 100%; height: 5px; background: #e0e0e0; position: absolute; top: 0; z-index: 1000; }
        #update-bar { width: 0%; height: 100%; background: #007AFF; transition: width 0.3s; }

        /* Hata Bilgilendirme Kutusu */
        #error-msg {
            display: none; position: absolute; top: 20px; left: 50%; transform: translateX(-50%);
            background: rgba(255, 0, 0, 0.85); color: white; padding: 12px 20px;
            border-radius: 10px; font-size: 14px; text-align: center; width: 80%; z-index: 1001;
        }
    </style>
</head>
<body>

    <div id="error-msg">Kamera eri≈üimi engellendi veya cihaz desteklemiyor.</div>

    <model-viewer 
        src="model.glb" 
        ios-src="model.usdz"
        ar 
        ar-modes="webxr scene-viewer quick-look" 
        ar-placement="floor" 
        ar-scale="fixed" 
        camera-controls 
        touch-action="none"
        shadow-intensity="1.5"
        exposure="1"
        alt="Bina Modeli">

        <div slot="progress-bar" id="progress-bar">
            <div id="update-bar"></div>
        </div>

        <button slot="ar-button" id="ar-button">
            üè¢ Bƒ∞NAYI SOKAƒûA YERLE≈ûTƒ∞R
        </button>

    </model-viewer>

    <script>
        const modelViewer = document.querySelector('model-viewer');
        const updateBar = document.querySelector('#update-bar');
        const errorMsg = document.querySelector('#error-msg');

        // Model y√ºkleme takibi
        modelViewer.addEventListener('progress', (event) => {
            const progress = event.detail.totalProgress * 100;
            updateBar.style.width = `${progress}%`;
            if (progress === 100) {
                setTimeout(() => { updateBar.parentElement.style.display = 'none'; }, 800);
            }
        });

        // AR Modu hatalarƒ±nƒ± yakala
        modelViewer.addEventListener('ar-status', (event) => {
            if (event.detail.status === 'failed') {
                errorMsg.style.display = 'block';
                errorMsg.innerText = "AR Ba≈ülatƒ±lamadƒ±. L√ºtfen Safari (iOS) veya Chrome (Android) kullandƒ±ƒüƒ±nƒ±zdan ve HTTPS baƒülantƒ±sƒ±ndan emin olun.";
                setTimeout(() => { errorMsg.style.display = 'none'; }, 5000);
            }
        });
    </script>
</body>
</html>
</body>
</html>
